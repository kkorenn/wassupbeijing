<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>koren</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0; width:100%; height:100%;
  overflow:hidden; font-family:'Inter',sans-serif; background:#0d001a; color:#fff;
}
#bg-video { position: fixed; top:0; left:0; width:100%; height:100%; object-fit:cover; z-index:0; filter:blur(6px) brightness(0.6); }
.rain { position: fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1; }
.rain-drop { position:absolute; width:1px; height:15px; background: rgba(255,255,255,0.6); opacity:0; animation: fall linear infinite; }
@keyframes fall { 0%{transform:translateY(-100%) translateX(0);opacity:0}10%{opacity:.8}100%{transform:translateY(100vh) translateX(100px);opacity:0} }

.main-card { background: rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.15); backdrop-filter: blur(25px) saturate(180%); -webkit-backdrop-filter: blur(25px) saturate(180%); padding: 3rem 3.5rem; border-radius: 1.5rem; max-width: 580px; text-align:center; z-index:2; position: relative; box-shadow: inset 0 0 25px rgba(255,255,255,0.05), 0 0 35px rgba(255,255,255,0.2); overflow: hidden; animation: fadeIn 0.5s ease-in; }
.main-card::before { content:""; position:absolute; inset:0; background:linear-gradient(135deg,rgba(255,255,255,0.15),rgba(255,255,255,0.02)); opacity:0.3; mix-blend-mode:overlay; pointer-events:none; }
.glow-text { text-shadow:0 0 12px #fff,0 0 28px #fff,0 0 50px rgba(255,255,255,.9); font-size: 2.25rem; }

#splash-screen { position: fixed; top:0; left:0; width:100%; height:100%; display:flex; justify-content:center; align-items:center; background: rgba(13,0,26,0.85); cursor:pointer; z-index:999; transition: opacity 1s ease; backdrop-filter: blur(20px) saturate(180%); -webkit-backdrop-filter: blur(20px) saturate(180%); }
#splash-screen h1 { font-family:'Press Start 2P',cursive; font-size:2.5rem; color:#fff; }

.card { display:flex; align-items:center; justify-content:space-between; background: rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.15); padding:1rem 1.75rem; border-radius:1rem; margin-top:1rem; text-decoration:none; transition: all .3s ease; backdrop-filter: blur(18px) saturate(180%); -webkit-backdrop-filter: blur(18px) saturate(180%); box-shadow: inset 0 0 25px rgba(255,255,255,0.03), 0 0 25px rgba(255,255,255,0.2); }
.card:hover { background: rgba(255,255,255,0.12); transform: translateY(-2px); box-shadow: 0 0 18px rgba(255,255,255,.7), inset 0 0 25px rgba(255,255,255,0.05); }
.card-info {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.card-info div {
  display: flex;
  flex-direction: column;
  align-items: center;
  line-height: 1.2;
}

.card-info img {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 0 50px rgba(255,255,255,0.3);
}
.card-stats { font-size:0.85rem; color: rgba(255,255,255,0.7); }

.button { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.25); padding: 0.35rem 1rem; border-radius: 9999px; font-size:0.85rem; color:#fff; transition: all .2s ease; cursor:pointer; backdrop-filter: blur(12px) saturate(180%); -webkit-backdrop-filter: blur(12px) saturate(180%); box-shadow: inset 0 0 10px rgba(255,255,255,0.05), 0 0 10px rgba(255,255,255,0.3); }
.button:hover { border-color:#fff; background: rgba(255,255,255,0.12); }

.separator { border:none; height:1px; background: rgba(255,255,255,0.15); margin:1rem 0; }

.discord-profile-card { display: flex; flex-direction: column; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem; text-align: center; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 1.25rem; backdrop-filter: blur(12px) saturate(180%); -webkit-backdrop-filter: blur(12px) saturate(180%); box-shadow: inset 0 0 20px rgba(255,255,255,0.1), 0 0 25px rgba(255,255,255,0.2); padding: 1.5rem 2rem; transition: all 0.3s ease; }
.discord-profile-card:hover { transform: translateY(-3px); box-shadow: inset 0 0 25px rgba(255,255,255,0.2), 0 0 35px rgba(255,255,255,0.3); }
.discord-profile-card img { width: 90px; height: 90px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255,255,255,0.3); box-shadow: 0 0 12px rgba(255,255,255,0.4); }

.cursor-petal { position: absolute; background-image: url('https://wallpapers.com/images/hd/white-heart-shape-graphic-tdhw3mbvbcbpup05.png'); background-size: cover; pointer-events: none; z-index: 10; opacity: 0; mix-blend-mode: lighten; animation: petalFade 0.75s ease-in-out forwards; }
@keyframes petalFade { 0% { opacity: 0; transform: scale(0.6) rotate(0deg); } 20% { opacity: 0.6; transform: scale(1) rotate(45deg); } 80% { opacity: 0.5; transform: scale(1) rotate(90deg); } 100% { opacity: 0; transform: scale(0.7) rotate(120deg); } }
@keyframes fadeIn { 0% { opacity:0; } 60% { opacity:0.9; } 100% { opacity:1; } }

#volume-control { position: fixed; top: 50%; right: 3rem; transform: translateY(-50%); height: 500px; width: 60px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 1.5rem; display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 1rem; z-index: 5; box-shadow: inset 0 0 20px rgba(255,255,255,0.1), 0 0 25px rgba(255,255,255,0.2); backdrop-filter: blur(25px) saturate(180%); -webkit-backdrop-filter: blur(25px) saturate(180%); }
#volume-slider { writing-mode: bt-lr; -webkit-appearance: slider-vertical; width: 8px; height: 90%; background: rgba(255,255,255,0.12); accent-color: #fff; border-radius: 9999px; box-shadow: 0 0 10px rgba(255,255,255,0.4); }

#playlist-container { position: fixed; top:50%; left:10%; transform: translate(-50%,-50%); width: 320px; max-height: 80%; background: rgba(255,255,255,0.05); border-radius: 1.5rem; backdrop-filter: blur(20px); border:1px solid rgba(255,255,255,0.15); z-index: 10; display:flex; flex-direction:column; overflow:hidden; animation: fadeIn 0.5s ease-in; }
#playlist-header { display:flex; align-items:center; gap: 1rem; padding:1rem; border-bottom:1px solid rgba(255,255,255,0.1); }
#playlist-header img { width:48px; height:48px; border-radius:50%; box-shadow:0 0 10px rgba(255,255,255,0.3); }
#playlist-header h2 { color:#fff; font-weight:bold; font-size:1.1rem; }
#song-list {
  max-height: calc(5 * 58px);
  overflow-y: auto;
  padding-right: 4px;
}
#song-list::-webkit-scrollbar {
  width: 6px;
}

#song-list::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
}

#song-list::-webkit-scrollbar-track {
  background: transparent;
}
.song-item { display:flex; justify-content:space-between; align-items:center; padding:0.4rem 0.6rem; border-radius:0.5rem; cursor:pointer; transition: all 0.2s; }
.song-item:hover { background: rgba(255,255,255,0.1); }
.song-item.active { background: rgba(255,255,255,0.2); }
.song-item span.like-button { color: #f472b6; cursor:pointer; }
#playlist-controls { display:flex; justify-content:space-around; padding:0.5rem; border-top:1px solid rgba(255,255,255,0.15); }
#playlist-controls button { background:none; border:none; cursor:pointer; width:40px; height:40px; display:flex; align-items:center; justify-content:center; }
#progress-container { height:4px; background:rgba(255,255,255,0.15); border-radius:2px; margin:0.5rem; width:calc(100% - 1rem); }
#progress-bar { height:100%; background:#fff; width:0%; border-radius:2px; }
@keyframes glowFade {
  0% {
    filter: drop-shadow(0 0 0px #fff) drop-shadow(0 0 0px #fff);
  }
  100% {
    filter: drop-shadow(0 0 6px #fff) drop-shadow(0 0 12px #fff);
  }
}
  #playlist-controls button:hover svg {
    animation: glowFade 0.5s ease-in-out forwards;
  }
  #playlist-controls button:active {
    transform: scale(1.3);
  }
</style>
</head>
<body>

<video id="bg-video" src="video.mp4" loop autoplay muted playsinline style="opacity:0; transition:opacity 1s;"></video>
<div class="rain" id="rain-container"></div>
<div id="splash-screen"><h1 class="glow-text">tap tap broski‚úåÔ∏è</h1></div>

<main id="main-content" class="flex items-center justify-center w-full h-screen hidden relative">
  <div class="main-card">

    <a href="https://discord.com/users/1354256543788568729" target="_blank" class="discord-profile-card">
      <img id="discord-avatar" src="" alt="Discord Avatar">
      <h1 id="username-title" class="glow-text mb-1"></h1>
      <div id="discord-status" class="text-purple-400 text-sm font-medium">Checking status...</div>
      <div id="discord-info" class="text-gray-300 text-sm">Loading...</div>
    </a>

    <hr class="separator" />
    <h1 class="glow-text" style="font-size: 1.25rem;">Staff Supervisor @ <a href="https://discord.gg/craven" target="_blank">discord.gg/craven</a><br>join fr</h1>
    <hr class="separator" />

    <a id="discord-server-card" href="#" target="_blank" class="card">
      <div class="card-info">
        <img id="discord-server-icon" src="https://placehold.co/50x50/b48cf2/1a0033?text=DC" alt="Server Icon">
        <div>
          <div id="discord-server-name" class="font-semibold text-white text-lg">Craven</div>
          <div id="discord-server-stats" class="card-stats"></div>
        </div>
      </div>
    </a>

    <a href="https://www.roblox.com/users/5035887377/profile" target="_blank" class="card roblox-card">
      <div class="card-info">
        <img src="https://tr.rbxcdn.com/30DAY-AvatarHeadshot-62CB896C71F61EEDD6652B982F3D15F3-Png/150/150/AvatarHeadshot/Webp/noFilter" alt="Roblox Avatar">
        <div>
          <div class="font-semibold text-white text-lg">@kkore_n</div>
          <div class="card-stats">Friends: 20 | Followers: 2.5K</div>
        </div>
      </div>
    </a>
  </div>
  <div id="volume-control">
    <input id="volume-slider" type="range" min="0" max="1" step="0.01" value="0.5">
  </div>
  <div id="playlist-container">
    <div id="playlist-header">
      <img id="playlist-logo" src="https://cdn.discordapp.com/icons/1382466603492311091/fb1278f1bacf59c0df800a3f744357c9.png?size=80" alt="Playlist Logo">
      <h2 id="playlist-name">koren's playlist</h2>
    </div>
    <div id="song-list"></div>
    <div id="progress-container"><div id="progress-bar"></div></div>
    <div id="playlist-controls">
      <button id="prev-song" title="Previous">
        <svg fill="white" viewBox="0 0 24 24" width="24" height="24"><path d="M6 18l8.5-6L6 6v12zM14 6h2v12h-2V6z"/></svg>
      </button>
      <button id="play-pause" title="Play/Pause">
        <svg id="play-icon" fill="white" viewBox="0 0 24 24" width="24" height="24"><path d="M8 5v14l11-7z"/></svg>
      </button>
      <button id="next-song" title="Next">
        <svg fill="white" viewBox="0 0 24 24" width="24" height="24"><path d="M4 6l8.5 6L4 18V6zm10 0h2v12h-2V6z"/></svg>
      </button>
<button id="repeat-song" title="Repeat">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.1151,10.07 C21.62795,10.07 22.0506092,10.456027 22.1083725,10.9533761 L22.1151,11.07 L22.1151,16.07 C22.1151,18.2121576 20.4311889,19.9610766 18.3147456,20.0651046 L18.1151,20.07 L7.22197,20.07 L7.2027284,20.4847792 L7.2027284,20.4847792 L7.1801076,20.8453376 C7.1761892,20.900684 7.17223,20.9536 7.16828,21.004 C7.14119,21.3495 6.81635,21.5608 6.53673,21.4146 L6.2307975,21.2503516 L6.2307975,21.2503516 L5.8710075,21.0468875 C5.806895,21.0096781 5.74079391,20.9708117 5.67283195,20.9302768 L5.2437518,20.6669521 C5.16885734,20.6196969 5.0923575,20.57075 5.01438,20.5201 L4.55084375,20.2100938 C4.47827625,20.1601219 4.40809531,20.1110984 4.34036437,20.0631742 L3.96388625,19.7900258 L3.96388625,19.7900258 L3.64925312,19.5504961 C3.60213719,19.5137781 3.557725,19.4787625 3.51608,19.4456 C3.28031,19.2579 3.2908,18.88 3.53871,18.6837 L3.81868875,18.4668906 L3.81868875,18.4668906 L4.15959,18.21455 L4.15959,18.21455 L4.55914125,17.9329594 L4.55914125,17.9329594 L5.01507,17.6284 L5.01507,17.6284 C5.1760475,17.523825 5.33038687,17.4266375 5.47709625,17.3366828 L5.8933425,17.0883625 L5.8933425,17.0883625 L6.2578575,16.8825109 L6.2578575,16.8825109 L6.56469,16.7182 L6.56469,16.7182 C6.84009,16.5746 7.13658,16.7538 7.16304,17.0778 L7.18850656,17.4253552 L7.18850656,17.4253552 L7.21180928,17.8395536 L7.21180928,17.8395536 L7.2217,18.07 L18.1151,18.07 C19.1694909,18.07 20.0332678,17.25415 20.1096144,16.2192661 L20.1151,16.07 L20.1151,11.07 C20.1151,10.5177 20.5628,10.07 21.1151,10.07 Z M17.5784,3.65537 L17.8843359,3.81961469 L17.8843359,3.81961469 L18.2441125,4.02306 C18.3082219,4.06026563 18.3743195,4.09912813 18.4422779,4.13965926 L18.8713369,4.40296371 C18.9462281,4.45021641 19.022725,4.49916125 19.1007,4.54981 L19.5642531,4.85984438 C19.6368234,4.90981938 19.707007,4.95884516 19.7747402,5.00677094 L20.1512254,5.27991938 L20.1512254,5.27991938 L20.4658449,5.51943031 C20.5129562,5.55614359 20.5573625,5.59115375 20.599,5.62431 C20.8348,5.81202 20.8243,6.1899 20.5764,6.38622 L20.2964094,6.6030625 L20.2964094,6.6030625 L19.9555,6.8554175 L19.9555,6.8554175 L19.5559406,7.13701125 L19.5559406,7.13701125 L19.1,7.44157 L19.1,7.44157 C18.939025,7.54613 18.7846875,7.64330813 18.6379797,7.73325781 L18.2217375,7.981575 L18.2217375,7.981575 L17.8572266,8.18744219 L17.8572266,8.18744219 L17.5504,8.35178 L17.5504,8.35178 C17.275,8.49534 16.9785,8.31614 16.9521,7.99217 L16.9266136,7.644574 L16.9266136,7.644574 L16.9032968,7.2303828 C16.89976,7.1560904 16.89644,7.07924 16.8934,6.99994 L6,6.99994 C4.89543,6.99994 4,7.89537 4,8.99994 L4,13.9999 C4,14.5522 3.55228,14.9999 3,14.9999 C2.44772,14.9999 2,14.5522 2,13.9999 L2,8.99994 C2,6.7908 3.79086,4.99994 6,4.99994 L16.8931,4.99994 L16.9123768,4.585144 L16.9123768,4.585144 L16.9349944,4.2246072 C16.938908,4.1692676 16.94286,4.11636 16.9468,4.06597 C16.9739,3.72042 17.2988,3.50915 17.5784,3.65537 Z"/>
  </svg>
</button>
    </div>
  </div>

  <audio id="playlist-audio" autoplay></audio>
</main>
<script>
// --- Elements ---
const bgVideo = document.getElementById('bg-video');
const splash = document.getElementById('splash-screen');
const mainContent = document.getElementById('main-content');
const audioEl = document.getElementById('playlist-audio');
const volumeSlider = document.getElementById('volume-slider');

// Volume control
volumeSlider.addEventListener('input', e => audioEl.volume = e.target.value);

// Splash screen
splash.addEventListener('click', () => {
  splash.style.opacity = '0';
  setTimeout(() => {
    splash.style.display = 'none';
    mainContent.classList.remove('hidden');
    bgVideo.style.opacity = '1';
    bgVideo.play().catch(console.warn);

    initRain();
    typeWriterLoop();
    fetchDiscordLanyard('1354256543788568729');
    fetchDiscordServer('craven');
    fetchRobloxUserData("5035887377");
  }, 1000);
});

// --- Discord Lanyard ---
async function fetchDiscordLanyard(userId) {
  try {
    const res = await fetch(`https://api.lanyard.rest/v1/users/${userId}`);
    const data = await res.json();
    const user = data.data;
    const discordUser = user.discord_user;

    document.getElementById('discord-avatar').src = `https://cdn.discordapp.com/avatars/${discordUser.id}/${discordUser.avatar}.png`;
    document.getElementById('username-title').textContent = discordUser.username;

    const activity = user.activities.find(a => a.type === 0);
    const activityText = activity ? activity.name : "Nothing";
    document.getElementById('discord-info').textContent = `Playing: ${activityText}`;

    const statusEl = document.getElementById('discord-status');
    let statusText = "Offline ‚ö´", statusColor = "#777";
    switch(user.discord_status) {
      case "online": statusText="Online üü¢"; statusColor="#00ff00"; break;
      case "dnd": statusText="Do Not Disturb üî¥"; statusColor="#ff0000"; break;
      case "idle": statusText="Idle üåô"; statusColor="#ffff00"; break;
    }
    statusEl.textContent = statusText;
    statusEl.style.color = statusColor;

  } catch(e) { console.error("Discord Lanyard fetch error:", e); }
}

// --- Discord Server ---
async function fetchDiscordServer(inviteCode){
  try{
    const res=await fetch(`https://discord.com/api/v10/invites/${inviteCode}?with_counts=true`).then(r=>r.json());
    const guild=res.guild;
    document.getElementById('discord-server-name').textContent=guild.name||'Server';
    document.getElementById('discord-server-stats').textContent=`Online: ${res.approximate_presence_count||0} | Total: ${res.approximate_member_count||0}`;
    document.getElementById('discord-server-icon').src=guild.icon?`https://cdn.discordapp.com/icons/${guild.id}/${guild.icon}.png?size=80`:'https://placehold.co/50x50/b48cf2/1a0033?text=DC';
    document.getElementById('discord-server-card').href=`https://discord.gg/${inviteCode}`;
  }catch(e){console.error(e);}
}

function formatNumber(num){return num>=1000?(num/1000).toFixed(1).replace(/\.0$/,'')+'K':num.toString();}

// --- Roblox Placeholder ---
async function fetchRobloxUserData(userID){
  try{
    const proxy='https://corsproxy.io/?';
    const userData=await fetch(`${proxy}https://users.roblox.com/v1/users/${userID}`).then(r=>r.json());
    const friendsData=await fetch(`${proxy}https://friends.roblox.com/v1/users//${userID}/friends/count`).then(r=>r.json());
    const followersData=await fetch(`${proxy}https://friends.roblox.com/v1/users//${userID}/followers/count`).then(r=>r.json());
    document.querySelector('.roblox-card .font-semibold').textContent=userData.name||'Roblox User';
    document.querySelector('.roblox-card .card-stats').textContent=`Friends: ${friendsData.count||0} | Followers: ${formatNumber(followersData.count||0)}`;
  }catch(e){console.error(e);}
}

// --- Rain effect ---
function initRain() {
  const container = document.getElementById('rain-container');
  for(let i=0;i<100;i++) {
    const drop = document.createElement('div');
    drop.className = 'rain-drop';
    drop.style.left = Math.random() * window.innerWidth + 'px';
    drop.style.animationDuration = (0.5 + Math.random() * 0.5) + 's';
    drop.style.animationDelay = Math.random() * 5 + 's';
    container.appendChild(drop);
  }
}

// Rose petal cursor
let lastParticleTime = 0;
document.addEventListener('mousemove', e => {
  const now = Date.now();
  if (now - lastParticleTime < 100) return;
  lastParticleTime = now;

  const petal = document.createElement('div');
  petal.className = 'cursor-petal';

  const spreadX = (Math.random() - 0.5) * 40;
  const spreadY = (Math.random() - 0.5) * 40;
  petal.style.left = (e.clientX + spreadX) + 'px';
  petal.style.top = (e.clientY + spreadY) + 'px';

  const size = 10 + Math.random() * 10;
  const rotate = Math.random() * 360;
  petal.style.width = size + 'px';
  petal.style.height = size + 'px';
  petal.style.transform = `rotate(${rotate}deg)`;

  document.body.appendChild(petal);

  petal.addEventListener('animationend', () => petal.remove());
});


// --- Playlist ---
const playlist = [
  { title: "NOKIA", artist: "Drake", src: "playlist/1.flac", img: "playlist/1.jpg" },
  { title: "One Dance", artist: "Drake", src: "playlist/2.flac", img: "playlist/2.jpg" },
  { title: "Young Girl A", artist: "siinamota", src: "playlist/3.flac", img: "playlist/3.jpg" },
  { title: "Gangnam Style", artist: "PSY", src: "playlist/4.flac", img: "playlist/4.jpg" },
  { title: "Á¥ÖËìÆËèØ", artist: "LiSA", src: "playlist/5.flac", img: "playlist/5.jpg" },
  { title: "Billie Jean", artist: "Michael Jackson", src: "playlist/6.flac", img: "playlist/6.jpg" },
  { title: "ÁÜ±ÊÉÖ„ÅÆ„Çπ„Éö„ÇØ„Éà„É©„É†", artist: "Ikimonogakari", src: "playlist/7.flac", img: "playlist/7.jpg" },
  { title: "Èùí„ÅÆ„Åô„Åø„Åã", artist: "Tatsuya Kitani", src: "playlist/8.flac", img: "playlist/8.jpg" },
  { title: "Dramaturgy", artist: "Eve", src: "playlist/9.flac", img: "playlist/9.jpg" },
  { title: "„Åü„Å∂„Çì", artist: "YOASOBI", src: "playlist/10.flac", img: "playlist/10.jpg" },
  { title: "Beat It", artist: "Michael Jackson", src: "playlist/11.flac", img: "playlist/11.jpg" },
  { title: "Ëâ≤ÂΩ©", artist: "yama", src: "playlist/12.flac", img: "playlist/12.jpg" },
  { title: "„Éõ„Çø„É´„Éé„Éí„Ç´„É™", artist: "Ikimonogakari", src: "playlist/13.flac", img: "playlist/13.jpg" },
  { title: "LOST IN PARADISE", artist: "ALI, AKLO", src: "playlist/14.flac", img: "playlist/14.jpg" },
  { title: "Alright", artist: "Kendrick Lamar", src: "playlist/15.flac", img: "playlist/15.jpg" },
];

let currentSongIndex = 0, isPlaying = true, shuffle = false;

// Render playlist items
const songListEl = document.getElementById('song-list');
playlist.forEach((s, i) => {
  const el = document.createElement('div');
  el.className = 'song-item';
  el.style.display = 'flex';
  el.style.alignItems = 'center';
  el.style.cursor = 'pointer';
  el.style.margin = '6px 0';

  // Image
  const imgEl = document.createElement('img');
  imgEl.src = s.img;
  imgEl.alt = s.title;
  imgEl.style.width = '40px';
  imgEl.style.height = '40px';
  imgEl.style.borderRadius = '6px';
  imgEl.style.marginRight = '0.5rem';
  imgEl.style.objectFit = 'cover';

  // Text container
  const textWrap = document.createElement('div');
  textWrap.style.display = 'flex';
  textWrap.style.flexDirection = 'column';

  // Title
  const titleEl = document.createElement('span');
  titleEl.textContent = s.title;
  titleEl.style.fontWeight = '600';
  titleEl.style.fontSize = '0.95rem';
  titleEl.style.textAlign = 'right';

  // Artist
  const artistEl = document.createElement('span');
  artistEl.textContent = s.artist;
  artistEl.style.fontSize = '0.8rem';
  artistEl.style.opacity = '0.7';
  artistEl.style.textAlign = 'right';

  textWrap.appendChild(titleEl);
  textWrap.appendChild(artistEl);

  el.appendChild(imgEl);
  el.appendChild(textWrap);

  el.addEventListener('click', () => playSong(i));
  songListEl.appendChild(el);
});

function playSong(index) {
  currentSongIndex = index;
  audioEl.src = playlist[index].src;
  audioEl.play();
  isPlaying = true;
  document.getElementById('play-icon').innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; // pause icon
  updatePlaylistUI();
}

// --- Update playlist UI ---
function updatePlaylistUI() {
  document.querySelectorAll('.song-item').forEach((el, i) => {
    el.classList.toggle('active', i === currentSongIndex);
    el.style.opacity = i === currentSongIndex ? '1' : '0.6';
  });
}

// --- Progress bar ---
const progressContainer = document.getElementById('progress-container');
const progressBar = document.getElementById('progress-bar');

audioEl.addEventListener('timeupdate', () => {
  progressBar.style.width = ((audioEl.currentTime / audioEl.duration) * 100 || 0) + '%';
});

audioEl.addEventListener('ended', () => {
  if (repeat) {
    playSong(currentSongIndex);
  } else {
    document.getElementById('next-song').click();
  }
});

// Drag seek
let isDragging = false;
progressContainer.addEventListener('mousedown', () => isDragging = true);
document.addEventListener('mouseup', () => isDragging = false);
document.addEventListener('mousemove', e => {
  if (!isDragging) return;
  const rect = progressContainer.getBoundingClientRect();
  const moveX = e.clientX - rect.left;
  audioEl.currentTime = Math.min(Math.max((moveX / rect.width) * audioEl.duration, 0), audioEl.duration);
});
progressContainer.addEventListener('click', e => {
  const rect = progressContainer.getBoundingClientRect();
  const clickX = e.clientX - rect.left;
  audioEl.currentTime = (clickX / rect.width) * audioEl.duration;
});

// --- Controls ---
document.getElementById('play-pause').addEventListener('click', () => {
  if (isPlaying) {
    audioEl.pause();
    isPlaying = false;
    document.getElementById('play-icon').innerHTML = '<path d="M8 5v14l11-7z"/>'; // play icon
  } else {
    audioEl.play();
    isPlaying = true;
    document.getElementById('play-icon').innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; // pause icon
  }
});

document.getElementById('next-song').addEventListener('click', () => {
  currentSongIndex = shuffle
    ? Math.floor(Math.random() * playlist.length)
    : (currentSongIndex + 1) % playlist.length;
  playSong(currentSongIndex);
});

document.getElementById('prev-song').addEventListener('click', () => {
  currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length;
  playSong(currentSongIndex);
});

// --- Repeat Toggle ---
const repeatBtn = document.getElementById('repeat-song');
let repeat = false;

// Set initial state
const svg = repeatBtn.querySelector('svg');
if(svg) svg.style.opacity = '0.6';

repeatBtn.addEventListener('click', () => {
  repeat = !repeat;
  
  // Animate opacity smoothly
  if(svg) {
    svg.style.transition = 'opacity 0.3s ease';
    svg.style.opacity = repeat ? '1' : '0.6';
  }
});

// --- Typing effect ---
const DISPLAY_TEXT = 'koren';
let charIndex = 0, forward = true;
const START_PAUSE = 1500, TYPE_SPEED = 500, DELETE_SPEED = 100, END_PAUSE = 750;
const h1El = document.getElementById('username-title');
const titleEl = document.getElementsByTagName('title')[0];

// Create a blinking underscore cursor using CSS animation
const style = document.createElement('style');
style.textContent = `
  .cursor {
    display: inline-block;
    width: 8px;
    animation: blink 0.8s step-end infinite;
  }
  @keyframes blink {
    50% { opacity: 0; }
  }
`;
document.head.appendChild(style);

function typeWriterLoop() {
  // Build text + cursor
  const text = DISPLAY_TEXT.substring(0, charIndex);
  const cursor = '<span class="cursor">_</span>';

  // Update display
  h1El.innerHTML = text + cursor;
  titleEl.textContent = charIndex === 0 ? '.' : text;

  // Same logic as your original version
  let delay;
  if (forward) {
    if (charIndex < DISPLAY_TEXT.length) {
      charIndex++;
      delay = TYPE_SPEED;
    } else {
      forward = false;
      delay = END_PAUSE;
    }
  } else {
    if (charIndex > 0) {
      charIndex--;
      delay = DELETE_SPEED;
    } else {
      forward = true;
      delay = END_PAUSE;
    }
  }

  setTimeout(typeWriterLoop, delay);
}

// Start typing after the same initial pause
setTimeout(typeWriterLoop, START_PAUSE);


</script>

</body>
</html>
